# プロセスインフォマティクス（Process Informatics）

## 参考にしたドキュメント
- 科学技術未来戦略ワークショップ報告書、材料創製技術を革新するプロセス・インフォマティクス
  https://www.jst.go.jp/crds/pdf/2020/WR/CRDS-FY2020-WR-12.pdf
- 室賀 駿「材料業界を取り巻くマテリアルズ・プロセスインフォマティクスの潮流と未来」成形加工 34(7), 250–256 (2022)  
  https://doi.org/10.4325/seikeikakou.34.250


## 1. プロセスインフォマティクスとは何か

- プロセスインフォマティクス（Process Informatics, PI）は、
  - 材料合成・熱処理・成膜・加工などの「プロセス条件」と
  - そこから得られる「構造・特性・歩留まり・コスト」
  を、データ駆動的に結びつける枠組みである。

- 材料インフォマティクスが
  - 「組成・構造 → 物性・性能」のモデル化を主眼とするのに対して、
- プロセスインフォマティクスは
  - 「温度・時間・雰囲気・圧力・応力・磁場・電場などのプロセス条件 → 構造・品質」
  の関係を扱う。

- 目的は、
  - 試行錯誤に依存してきたプロセス開発を、
    データとモデルに基づいて体系化・最適化すること
  - 高温プロセスや多段プロセスなど、
    人の直感だけでは最適化が難しい条件空間を効率よく探索すること
  である。


## 2. プロセスインフォマティクスの対象とスコープ

このページでは、以下のような「プロセスに関する情報」を主な対象とする。

- プロセス条件・レシピ
  - 熱処理：温度プロファイル（昇温・保持・冷却）、雰囲気（Ar, N2, 真空等）、時間
  - 成膜：基板温度、ターゲットパワー、ガス流量、圧力、基板バイアス
  - 機械加工：荷重、送り速度、回転数、工具形状
  - 化学合成・溶液プロセス：濃度、pH、撹拌条件、添加順序など

- プロセス中・前後で得られる指標
  - インライン信号：温度ログ、圧力ログ、放射温度測定、インピーダンス、スペクトルなど
  - オフライン評価：粒径分布、析出物形態、欠陥密度、磁気特性、電気特性 など

- スコープの切り分け
  - 「プロセス条件 → 構造・特性」の関係をモデル化し、
    プロセスレシピを設計・最適化する部分を「プロセスインフォマティクス」
  - 組成・結晶構造そのものの設計は「材料インフォマティクス」
  - 測定データ（スペクトル・画像）の前処理・特徴抽出は「計測インフォマティクス」
  - DFT・MD・FEM などの物理モデルとの統合は「物理インフォマティクス」で扱う。


## 3. プロセスデータと特徴量（ディスクリプタ）

プロセスインフォマティクスでは、プロセス条件・ログを「モデルが扱える形」にすることが重要になる。

### 3.1 レシピパラメータの特徴量化

- 単純な条件
  - 例：最高温度 T_max、保持時間 t_hold、冷却速度 dT/dt などをそのまま数値として扱う。
- 多段プロセス
  - 昇温→保持→冷却などの複数ステップを、
    - ステップごとの温度・時間
    - 積算熱量や「有効温度・有効時間」（Time-Temperature Parameter）  
    といった形でまとめる。
- 雰囲気・ガス組成
  - ガス種（Ar, N2, H2, O2 など）と分圧を、ベクトル化して特徴量とする。

### 3.2 プロセスログ・インライン信号の特徴量化

- 温度・圧力ログ
  - 平均・分散・最大値・立ち上がり勾配などの統計量
  - 目標プロファイルとの差分（追従誤差）など
- インライン計測信号
  - プラズマ発光スペクトル、インピーダンス、音響信号などの
    周波数成分、ピーク強度、時間変化のモード
- これらは計測インフォマティクスの処理結果として得られた
  「特徴量ベクトル」として、プロセスインフォマティクス側に渡す形を想定する。

### 3.3 出力側の指標（ターゲット変数）

- 材料・デバイスの性能
  - 飽和磁化、損失、抵抗率、臨界電流密度、デバイス効率など
- 構造指標
  - 粒径、析出相の体積分率、配向性、欠陥密度、残留応力など
- 製造品質指標
  - 歩留まり、不良率、ばらつき（標準偏差）、スループット

プロセスインフォマティクスの中心課題は、
「入力：プロセス条件・ログ → 出力：性能・品質」をモデル化することである。


## 4. モデル・手法（プロセスインフォマティクスの典型例）

### 4.1 教師あり学習によるプロセス→品質モデル

- 目的：
  - プロセス条件から、性能・品質（連続値やクラス）を予測する。
- モデル例：
  - 線形回帰・リッジ・LASSO（簡易な近似モデル）
  - ランダムフォレスト・勾配ブースティング
  - ガウス過程回帰（不確かさを含むモデル）
  - ニューラルネットワーク（多段プロセス・時系列を含む複雑な関係）

- 用途：
  - プロセスウィンドウの可視化（どの条件で良品／不良が出やすいか）
  - 感度解析（どのパラメータが品質に効いているか）

### 4.2 ベイズ最適化・自律プロセス探索

- 高価なプロセス（成膜、熱処理、結晶成長など）では、
  - 少ない試行回数で「良い条件」を見つけたい。
- ベイズ最適化の枠組みでは、
  - ガウス過程などでプロセス→性能をモデル化しつつ、
  - 次に試す条件を「期待改善量」などの指標で決める。
- 応用例：
  - フラックス法による単結晶成長条件の最適化
  - 多元スパッタの組成＋熱処理条件の最適化
  - 有機薄膜・塗工プロセスの乾燥条件最適化

### 4.3 プロセス監視・異常検知

- 製造ラインの安定稼働に向けて、
  - 温度・圧力・電力・画像などのプロセスログから
  - 異常パターンを検知する。
- 手法：
  - 統計的プロセス管理（SPC）：管理図、主成分分析による多変量監視
  - 機械学習：オートエンコーダによる異常検知、時系列クラスタリング
- 目的：
  - 早期にプロセス逸脱を検知し、不良の連鎖を防ぐ。

### 4.4 プロセス–構造–特性（Process–Structure–Property）連成モデル

- プロセスインフォマティクスを、
  - 材料インフォマティクス・物理インフォマティクスと連成させ、
  - 「プロセス → 構造 → 特性」の鎖を一体として扱うアプローチ。
- 例：
  - メタル積層造形（AM）における
    レーザー条件 → 溶融池 → 凝固組織 → 機械特性 のデータ駆動モデル
  - 熱処理条件 → 析出相分布 → 磁気特性 の階層モデル


## 5. プロセスインフォマティクスの典型的なワークフロー

1. 目的・制約条件の整理
   - 例：
     - 「保磁力 Hc を X 以下にしつつ、損失 P を Y 以下にする熱処理条件を見つける」
     - 「歩留まり 95% 以上を達成する成膜レシピを設計する」
   - 同時に、使える設備・時間・コストなどの制約を整理。

2. データ収集
   - 既存の実験ノート・ログ・品質データを整理・構造化。
   - 必要に応じて設計実験（DoE）を行い、条件空間を効率よくサンプリング。

3. 前処理・特徴量設計
   - プロセス条件・ログを特徴量として定義。
   - 計測インフォマティクス側で処理されたスペクトル・画像特徴を取り込むこともある。

4. モデル構築・評価
   - 教師あり学習でプロセス→性能モデルを構築。
   - クロスバリデーションや時系列分割などで汎化性能を評価。

5. 最適化・探索
   - ベイズ最適化や多目的最適化を用いて、
     目的関数を最大化・最小化する条件を提案。
   - 実験結果をモデルにフィードバックしつつ、探索を継続。

6. 実装・監視
   - 見つかった条件をスケールアップし、製造ラインに適用。
   - ラインのログをモニタリングし、モデルの外挿エラーやプロセスドリフトを監視。


## 6. 応用例

- 単結晶成長（フラックス法）
  - フラックス組成・温度プロファイル・冷却速度・容器材質などを入力とし、
  - 結晶サイズ・欠陥密度・収率を出力とするモデルを構築して、
  - 「成長しやすい条件」「異常結晶ができやすい条件」を可視化。

- 多元スパッタ成膜
  - ターゲットパワー、ガス圧、基板温度、距離などを変数として、
  - 膜厚、組成、結晶性、磁気特性などを予測。
  - ベイズ最適化で「低損失・高磁化・膜応力低減」の条件セットを探索。

- 粉末冶金・焼結プロセス
  - 圧粉条件・焼結温度・雰囲気・時間から、
  - 密度、気孔率、磁気特性、機械特性を予測し、
  - 目標特性を満たすプロセスウィンドウを決定。


## 7. 注意点・限界

- データ不足・バイアス
  - 実験コストが高いプロセスほど、データ点が少なく偏りやすい。
  - 既存データが「良品近傍」に偏っていると、
    「失敗条件」を学習できず、外挿に弱いモデルになる。

- 条件空間の高次元性
  - 多数のパラメータ（温度・時間・濃度・順番など）を同時に最適化するのは難しい。
  - 物理的な知識や経験を生かして、
    重要なパラメータに絞り込む工夫が必要。

- スケールアップと再現性
  - ラボスケールで得られた最適条件が、
    スケールアップ時にそのまま使えるとは限らない。
  - スケール依存のパラメータ（熱伝達、スループット制約など）を
    モデル側に組み込む工夫が必要。

- ブラックボックス化のリスク
  - 単に機械学習モデルに任せるだけでは、
    「なぜその条件が良いのか」が分からない。
  - 物理インフォマティクスとの連携や、
    物理量に基づく特徴量設計によって解釈性を高めることが望ましい。


## 8. まとめ

- 本ページ「プロセスインフォマティクス」では、
  - 材料・デバイス製造におけるプロセス条件を対象に、
  - プロセス→構造・特性のデータ駆動モデル化と最適化の枠組みを整理した。

- 役割分担のイメージ：
  - 材料インフォマティクス：  
    組成・結晶構造・ミクロ構造を中心に、「どんな材料が良いか」を考える。
  - 計測インフォマティクス：  
    実験・計測データから、ノイズを抑えた有用な特徴量を抽出する。
  - プロセスインフォマティクス：  
    プロセス条件と構造・特性の関係をモデル化し、「どう作れば良いか」を設計する。
  - 物理インフォマティクス：  
    DFT・MD・フェーズフィールド・マルチフィジックス解析などの物理モデルと
    データ駆動手法を統合し、「なぜそのプロセス・材料が良いのか」を理解する。

- これらを統合することで、
  - 材料開発だけでなく、その製造プロセス・スケールアップ・量産までを
    一貫してデータ駆動で設計する「マテリアルズ・プロセスインフォマティクス」の実現を目指す。
